{"is_source_file": true, "format": "TypeScript", "description": "This file provides API client functions for interacting with a backend service, including authentication, decision management, health checks, and similarity search functionalities. It defines request handling, response schemas, and exposes methods such as signIn, signUp, listDecisions, and similaritySearch.", "external_files": ["zod"], "external_methods": ["fetch", "localStorage.getItem", "process.env.NEXT_PUBLIC_API_BASE", "process.env.NEXT_PUBLIC_BACKEND_URL"], "published": ["api"], "classes": [], "methods": [{"name": "export function getApiBase(): string { getApiBase", "description": "Returns the configured backend API base URL.", "scope": "", "scopeKind": ""}, {"name": "signIn", "description": "Performs user sign-in with email and password, returning an auth token and user info."}, {"name": "signUp", "description": "Registers a new user account with email, password, and optional profile info, returning an auth token and user info."}, {"name": "me", "description": "Fetches the current authenticated user's details."}, {"name": "listDecisions", "description": "Retrieves a list of decisions."}, {"name": "createDecision", "description": "Creates a new decision with title, context, and expected outcome."}, {"name": "getDecision", "description": "Retrieves detailed information about a specific decision by ID."}, {"name": "updateDecision", "description": "Updates an existing decision identified by ID."}, {"name": "similaritySearch", "description": "Performs a similarity search based on a query string."}, {"name": "function getStoredToken(): string | null { getStoredToken", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "async function requestJSON<T>( requestJSON", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["requestJSON", "SignInResponseSchema.parse", "SimilaritySearchResponseSchema.parse", "z.object", "z.string", "z.number", "z.union"], "search-terms": ["api client", "decision", "auth", "signIn", "createDecision", "similaritySearch", "health"], "state": 2, "file_id": 31, "knowledge_revision": 86, "git_revision": "", "revision_history": [{"76": ""}, {"86": ""}], "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^const API_BASE =$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "SignInResponseSchema", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^const SignInResponseSchema = z.object({$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "SimilaritySearchResponseSchema", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^const SimilaritySearchResponseSchema = z.object({$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^export const api = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "bodyText", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^    const bodyText = await res.text().catch(() => \"\");$/", "language": "TypeScript", "kind": "constant", "scope": "requestJSON", "scopeKind": "function"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^export function getApiBase(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getStoredToken", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^  const token = wantAuth ? getStoredToken() : null;$/", "language": "TypeScript", "kind": "constant", "scope": "requestJSON", "scopeKind": "function"}, {"_type": "tag", "name": "getStoredToken", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^function getStoredToken(): string | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^  async health() {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "okStatuses", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^  const okStatuses = init?.expectStatus ?? [200, 201, 204];$/", "language": "TypeScript", "kind": "constant", "scope": "requestJSON", "scopeKind": "function"}, {"_type": "tag", "name": "requestJSON", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^async function requestJSON<T>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^  const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "requestJSON", "scopeKind": "function"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^  const token = wantAuth ? getStoredToken() : null;$/", "language": "TypeScript", "kind": "constant", "scope": "requestJSON", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^  const url = `${API_BASE}${path}`;$/", "language": "TypeScript", "kind": "constant", "scope": "requestJSON", "scopeKind": "function"}, {"_type": "tag", "name": "wantAuth", "path": "/home/kavia/workspace/code-generation/decision-insight-platform-325145-325156/decision_replay_frontend/src/lib/api/client.ts", "pattern": "/^  const wantAuth = init?.auth !== false; \\/\\/ default true$/", "language": "TypeScript", "kind": "constant", "scope": "requestJSON", "scopeKind": "function"}], "hash": "4bb093b00ba851604f6881ffa1105cee", "format-version": 4, "code-base-name": "decision_replay_frontend", "filename": "decision_replay_frontend/src/lib/api/client.ts"}